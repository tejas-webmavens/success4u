!function(a){function c(a){function b(a,b){for(var c=null,d=0;d<b.length&&a!=b[d];++d)b[d].stack==a.stack&&(c=b[d]);return c}function c(a,c,d){if(null!=c.stack&&c.stack!==!1){var e=b(c,a.getData());if(e){for(var k,l,m,n,o,p,z,A,f=d.pointsize,g=d.points,h=e.datapoints.pointsize,i=e.datapoints.points,j=[],q=c.lines.show,r=c.bars.horizontal,s=f>2&&(r?d.format[2].x:d.format[2].y),t=q&&c.lines.steps,u=!0,v=r?1:0,w=r?0:1,x=0,y=0;;){if(x>=g.length)break;if(z=j.length,null==g[x]){for(A=0;A<f;++A)j.push(g[x+A]);x+=f}else if(y>=i.length){if(!q)for(A=0;A<f;++A)j.push(g[x+A]);x+=f}else if(null==i[y]){for(A=0;A<f;++A)j.push(null);u=!0,y+=h}else{if(k=g[x+v],l=g[x+w],n=i[y+v],o=i[y+w],p=0,k==n){for(A=0;A<f;++A)j.push(g[x+A]);j[z+w]+=o,p=o,x+=f,y+=h}else if(k>n){if(q&&x>0&&null!=g[x-f]){for(m=l+(g[x-f+w]-l)*(n-k)/(g[x-f+v]-k),j.push(n),j.push(m+o),A=2;A<f;++A)j.push(g[x+A]);p=o}y+=h}else{if(u&&q){x+=f;continue}for(A=0;A<f;++A)j.push(g[x+A]);q&&y>0&&null!=i[y-h]&&(p=o+(i[y-h+w]-o)*(k-n)/(i[y-h+v]-n)),j[z+w]+=p,x+=f}u=!1,z!=j.length&&s&&(j[z+2]+=p)}if(t&&z!=j.length&&z>0&&null!=j[z]&&j[z]!=j[z-f]&&j[z+1]!=j[z-f+1]){for(A=0;A<f;++A)j[z+f+A]=j[z+A];j[z+1]=j[z-f+1]}}d.points=j}}}a.hooks.processDatapoints.push(c)}var b={series:{stack:null}};a.plot.plugins.push({init:c,options:b,name:"stack",version:"1.2"})}(jQuery);